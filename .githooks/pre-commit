#!/bin/sh
# Pre-commit hook: run fast checks (typecheck + lint)
# To enable: git config core.hooksPath .githooks

echo "── Pre-commit: running fast checks ──"

cd "$(git rev-parse --show-toplevel)/frontend" || exit 1

# TypeScript
echo "  TypeScript..."
npx tsc --noEmit 2>/dev/null
if [ $? -ne 0 ]; then
  echo "  ✗ TypeScript check failed. Fix errors before committing."
  exit 1
fi
echo "  ✓ TypeScript OK"

# ESLint (source files only, ignore build artifacts)
echo "  ESLint..."
npx eslint lib/ app/ components/ --max-warnings 50 2>/dev/null
if [ $? -ne 0 ]; then
  echo "  ✗ ESLint check failed. Fix errors before committing."
  exit 1
fi
echo "  ✓ ESLint OK"

echo "── Pre-commit passed ──"
echo ""
echo "TIP: Run 'npm test' in frontend/ for full integration tests"
